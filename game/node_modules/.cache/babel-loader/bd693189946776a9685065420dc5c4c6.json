{"ast":null,"code":"var _jsxFileName = \"/var/www/html/chat-app/game/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useMemo, useState, useRef } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport Phaser from \"phaser\";\nimport GridEngine from \"grid-engine\";\nimport BootScene from \"./game/scenes/BootScene\";\nimport MainMenuScene from \"./game/scenes/MainMenuScene\";\nimport GameOverScene from \"./game/scenes/GameOverScene\";\nimport GameScene from \"./game/scenes/GameScene\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\nimport { Backdrop, Fade, Modal, Typography } from \"@material-ui/core\";\nimport dialogBorderBox from \"./game/assets/images/dialog_borderbox.png\";\nimport GameMenu from \"./game/GameMenu\";\nimport DialogBox from \"./game/DialogBox\";\nimport HeroCoin from \"./game/HeroCoin\";\nimport HeroHealth from \"./game/HeroHealth\";\nimport \"./App.css\";\nimport { calculateGameSize } from \"./game/utils\";\nimport ReactAudioPlayer from \"react-audio-player\";\nimport apple from \"./game/assets/audio/apple.mp3\";\nimport volume from \"./game/assets/images/volume.png\";\nimport trophy from \"./game/assets/images/trophy.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  width,\n  height,\n  multiplier\n} = calculateGameSize();\nconst host = \"http://localhost:3000\";\nconst useStyles = makeStyles(theme => ({\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    overflow: \"auto\"\n  },\n  postContainer: {\n    maxWidth: \"90%\",\n    maxHeight: \"90%\"\n  },\n  gameContentWrapper: {\n    width: `${width * multiplier}px`,\n    height: `${height * multiplier}px`,\n    margin: \"auto\",\n    padding: 0,\n    overflow: \"hidden\",\n    \"& canvas\": {\n      imageRendering: \"pixelated\",\n      \"-ms-interpolation-mode\": \"nearest-neighbor\",\n      boxShadow: \"0px 0px 0px 3px rgba(0,0,0,0.75)\"\n    }\n  },\n  pageWrapper: {\n    background: theme.palette.background.paper,\n    padding: 0,\n    margin: 0\n  },\n  loadingText: {\n    fontFamily: '\"Press Start 2P\"',\n    marginTop: \"30px\",\n    marginLeft: \"30px\"\n  },\n  preLoadDialogImage: {\n    backgroundImage: `url(\"${dialogBorderBox}\")`,\n    backgroundSize: \"1px\",\n    backgroundRepeat: \"no-repeat\"\n  },\n  gameWrapper: {\n    color: \"#FFFFFF\"\n  },\n  gameGif: {\n    width: \"100%\",\n    position: \"absolute\",\n    imageRendering: \"pixelated\",\n    top: 0\n  }\n}));\nconst url = \"https://vysqy4zclvobj.vcdn.cloud/E_Learning/page/\";\nconst dialogs = {\n  npc_01: [{\n    message: \"Hello\"\n  }],\n  npc_02: [{\n    message: \"Hello there\"\n  }],\n  npc_03: [{\n    message: \"Hi\"\n  }],\n  npc_04: [{\n    message: \"Hey\"\n  }],\n  sword: [{\n    message: \"Newton phát hiện ra định luật hấp dẫn sau khi bị quả gì rơi vào đầu?\",\n    answer: \"apple\",\n    audio: apple\n  }],\n  apple: [{\n    message: \"Quả gì khi chín đỏ tươi. Ăn vào ngọt mát, da thời đẹp hơn?\",\n    answer: \"apple\",\n    audio: \"apple.mp3\"\n  }],\n  watermelon: [{\n    message: \"Quả gì nổi tiếng trong sự tích Mai An Tiêm?\",\n    answer: \"watermelon\",\n    audio: \"water_melon.mp3\"\n  }],\n  pineapple: [{\n    message: \"Quả gì có nhiều mắt nhất?\",\n    answer: \"pineapple\",\n    audio: \"pineapple.mp3\"\n  }],\n  orange: [{\n    message: \"Quả gì bổ sung nhiều vitamin C cho cơ thể?\",\n    answer: \"orange\",\n    audio: \"orange.mp3\"\n  }],\n  mango: [{\n    message: \"Lủng liễng trĩu trịt cành cao. Nghe tên cứ ngỡ ngã nhào đất đen?\",\n    answer: \"mango\",\n    audio: \"mango.mp3\"\n  }],\n  cherries: [{\n    message: \"Quả gì màu đỏ ăn rất ngon?\",\n    answer: \"cherry\",\n    audio: \"cherry.mp3\"\n  }],\n  banana: [{\n    message: \"Vỏ quả này dẫm phải rất dễ ngã đó nha\",\n    answer: \"banana\",\n    audio: \"banana.mp3\"\n  }],\n  avocado: [{\n    message: \"Da thì đen mượt, Ruột trắng hơn ngà, Mùi vị đậm đà, Đắt ơi là đắt - Là quả gì?\",\n    answer: \"avocado\",\n    audio: \"avocado.mp3\"\n  }],\n  push: [{\n    message: \"You can push boxes now\"\n  }],\n  sign_01: [{\n    message: \"You can read this!\"\n  }],\n  book_01: [{\n    message: \"Welcome to the game!\"\n  }]\n};\nconst arrQuestion = [\"apple\", \"watermelon\", \"orange\", \"pineapple\", \"cherries\", \"mango\", \"banana\", \"avocado\"];\n\nfunction App() {\n  _s();\n\n  const classes = useStyles();\n  const [messages, setMessages] = useState([]);\n  const [characterName, setCharacterName] = useState(\"\");\n  const [gameMenuItems, setGameMenuItems] = useState([\"hihi\"]);\n  const [gameMenuPosition, setGameMenuPosition] = useState(\"center\");\n  const [heroHealthStates, setHeroHealthStates] = useState([\"full\", \"full\", \"full\"]);\n  const [heroCoins, setHeroCoins] = useState(0);\n  const [urlAudio, setUrlAudio] = useState(\"\");\n  const [questionIndex, setQuestionIndex] = useState(0);\n  const [mess, setMess] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [id, setId] = useState();\n  const [roomId, setRoomId] = useState();\n  const [name, setName] = useState();\n  const socketRef = useRef();\n  const messagesEnd = useRef();\n  var query = window.location.search.substring(1);\n  console.log(query);\n\n  function getQueryVariable(variable) {\n    var query = window.location.search.substring(1);\n    console.log(query); //\"app=article&act=news_content&aid=160990\"\n\n    var vars = query.split(\"&\");\n    console.log(vars); //[ 'app=article', 'act=news_content', 'aid=160990' ]\n\n    for (var i = 0; i < vars.length; i++) {\n      var pair = vars[i].split(\"=\");\n      console.log(pair); //[ 'app', 'article' ][ 'act', 'news_content' ][ 'aid', '160990' ]\n\n      if (pair[0] == variable) {\n        return pair[1];\n      }\n    }\n\n    return false;\n  }\n\n  useEffect(() => {\n    console.log(roomId);\n    console.log(name);\n  }, [roomId, name]);\n  useEffect(() => {\n    const roomId = getQueryVariable(\"roomid\");\n    const name = getQueryVariable(\"name\");\n    setRoomId(roomId);\n    setName(name);\n    socketRef.current = socketIOClient.connect(host, {\n      auth: {\n        name: name\n      }\n    });\n    socketRef.current.on(\"getId\", data => {\n      setId(data);\n    });\n    socketRef.current.on(\"setUser\", data => {\n      console.log(data);\n    });\n    socketRef.current.on(\"changedRank\", data => {\n      console.log(data);\n    });\n    socketRef.current.on(\"listUser\", data => {\n      console.log(data);\n    });\n\n    const upPoint = () => {\n      const point = {\n        id: id,\n        point: 10,\n        roomId: `room${roomId}`\n      };\n      socketRef.current.emit(\"changedRank\");\n    };\n\n    socketRef.current.emit(\"create\", `room${roomId}`);\n    socketRef.current.on(\"sendDataServer\", dataGot => {\n      setMess(oldMsgs => [...oldMsgs, dataGot.data]);\n      scrollToBottom();\n    });\n    return () => {\n      socketRef.current.disconnect(id => {\n        console.log(\"disconnect\");\n      });\n    };\n  }, []);\n\n  const sendMessage = () => {\n    if (message !== null) {\n      const msg = {\n        content: message,\n        id: id,\n        roomId: `room${roomId}`\n      };\n      socketRef.current.emit(\"sendDataClient\", msg);\n      setMessage(\"\");\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEnd.current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n\n  const renderMess = mess.map((m, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${m.id === id ? \"your-message\" : \"other-people\"} chat-item`,\n    children: m.content\n  }, index, false, {\n    fileName: _jsxFileName,\n    lineNumber: 312,\n    columnNumber: 5\n  }, this));\n\n  const handleChange = e => {\n    setMessage(e.target.value);\n  };\n\n  const onEnterPress = e => {\n    if (e.keyCode == 13 && e.shiftKey == false) {\n      sendMessage();\n    }\n  };\n\n  const handleMessageIsDone = useCallback(() => {\n    const customEvent = new CustomEvent(`${characterName}-dialog-finished`, {\n      detail: {}\n    });\n    window.dispatchEvent(customEvent);\n    setMessages([]);\n    setCharacterName(\"\");\n  }, [characterName]);\n  const handleMenuItemSelected = useCallback(selectedItem => {\n    setGameMenuItems([]);\n    const customEvent = new CustomEvent(\"menu-item-selected\", {\n      detail: {\n        selectedItem\n      }\n    });\n    window.dispatchEvent(customEvent);\n  }, []);\n  useEffect(() => {\n    const game = new Phaser.Game({\n      type: Phaser.AUTO,\n      title: \"some-game-title\",\n      parent: \"game-content\",\n      orientation: Phaser.Scale.LANDSCAPE,\n      localStorageName: \"some-game-title\",\n      width,\n      height,\n      autoRound: true,\n      pixelArt: true,\n      scale: {\n        autoCenter: Phaser.Scale.CENTER_BOTH,\n        mode: Phaser.Scale.ENVELOP\n      },\n      scene: [BootScene, MainMenuScene, GameScene, GameOverScene],\n      physics: {\n        default: \"arcade\"\n      },\n      plugins: {\n        scene: [{\n          key: \"gridEngine\",\n          plugin: GridEngine,\n          mapping: \"gridEngine\"\n        }]\n      },\n      backgroundColor: \"#000000\"\n    });\n    window.phaserGame = game;\n  }, []);\n  useEffect(() => {\n    if (gameMenuItems.length == 0) {\n      console.log(\"start\");\n      const question = arrQuestion[questionIndex];\n      localStorage.setItem(\"question\", question);\n      setUrlAudio(`${url}${dialogs[question][0].audio}`);\n    }\n  }, [questionIndex, gameMenuItems]);\n  useEffect(() => {\n    const dialogBoxEventListener = _ref => {\n      let {\n        detail\n      } = _ref;\n      // TODO fallback\n      detail.characterName === arrQuestion[questionIndex] && setUrlAudio(`${url}${dialogs[detail.characterName][0].audio}`);\n      setCharacterName(detail.characterName);\n      setMessages(dialogs[detail.characterName]);\n    };\n\n    window.addEventListener(\"new-dialog\", dialogBoxEventListener);\n\n    const gameMenuEventListener = _ref2 => {\n      let {\n        detail\n      } = _ref2;\n      setGameMenuItems(detail.menuItems);\n      setGameMenuPosition(detail.menuPosition);\n    };\n\n    window.addEventListener(\"menu-items\", gameMenuEventListener);\n\n    const heroHealthEventListener = _ref3 => {\n      let {\n        detail\n      } = _ref3;\n      // console.log(detail);\n      setHeroHealthStates(detail.healthStates);\n    };\n\n    window.addEventListener(\"hero-health\", heroHealthEventListener);\n\n    const heroCoinEventListener = _ref4 => {// setHeroCoins(detail.heroCoins);\n\n      let {\n        detail\n      } = _ref4;\n    };\n\n    window.addEventListener(\"hero-coin\", heroCoinEventListener);\n    return () => {\n      window.removeEventListener(\"new-dialog\", dialogBoxEventListener);\n      window.removeEventListener(\"menu-items\", gameMenuEventListener);\n      window.removeEventListener(\"hero-health\", heroHealthEventListener);\n      window.removeEventListener(\"hero-coin\", heroCoinEventListener);\n    };\n  }, [setCharacterName, setMessages]);\n  console.log(gameMenuItems);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [gameMenuItems.length == 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"leaderboard\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: trophy\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }, this), \"Leader Board\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Jerry Wood\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Brandon Barnes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Raymond Knight\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Trevor McCormick\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Andrew Fox\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ReactAudioPlayer, {\n      src: urlAudio,\n      autoPlay: true,\n      controls: true,\n      style: {\n        display: \"none\"\n      },\n      onEnded: () => setUrlAudio(\"\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.gameWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"game-content\",\n        className: classes.gameContentWrapper\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this), gameMenuItems.length === 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setUrlAudio(`${url}${dialogs[localStorage.getItem(\"question\")][0].audio}`),\n        style: {\n          position: \"fixed\",\n          right: \"500px\",\n          top: \"40px\",\n          backgroundColor: \"transparent\",\n          border: 0,\n          cursor: \"pointer\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: volume\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 11\n      }, this), heroHealthStates.length > 0 && /*#__PURE__*/_jsxDEV(HeroHealth, {\n        gameSize: {\n          width,\n          height,\n          multiplier\n        },\n        healthStates: heroHealthStates\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 11\n      }, this), heroCoins !== null && /*#__PURE__*/_jsxDEV(HeroCoin, {\n        gameSize: {\n          width,\n          height,\n          multiplier\n        },\n        heroCoins: heroCoins\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 11\n      }, this), messages.length > 0 && /*#__PURE__*/_jsxDEV(DialogBox, {\n        onDone: handleMessageIsDone,\n        characterName: characterName,\n        messages: messages,\n        gameSize: {\n          width,\n          height,\n          multiplier\n        },\n        setHeroCoins: setHeroCoins,\n        setHeroHealthStates: setHeroHealthStates,\n        question: arrQuestion[questionIndex],\n        setQuestionIndex: setQuestionIndex,\n        heroHealthStates: heroHealthStates\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 11\n      }, this), gameMenuItems.length > 0 && /*#__PURE__*/_jsxDEV(GameMenu, {\n        items: gameMenuItems,\n        gameSize: {\n          width,\n          height,\n          multiplier\n        },\n        position: gameMenuPosition,\n        onSelected: handleMenuItemSelected\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 430,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"25roE3CCltVMtGQC0/YxDt86TCk=\", false, function () {\n  return [useStyles];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/var/www/html/chat-app/game/src/App.js"],"names":["useCallback","useEffect","useMemo","useState","useRef","socketIOClient","Phaser","GridEngine","BootScene","MainMenuScene","GameOverScene","GameScene","makeStyles","classNames","Backdrop","Fade","Modal","Typography","dialogBorderBox","GameMenu","DialogBox","HeroCoin","HeroHealth","calculateGameSize","ReactAudioPlayer","apple","volume","trophy","width","height","multiplier","host","useStyles","theme","modal","display","alignItems","justifyContent","paper","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","overflow","postContainer","maxWidth","maxHeight","gameContentWrapper","margin","imageRendering","pageWrapper","loadingText","fontFamily","marginTop","marginLeft","preLoadDialogImage","backgroundImage","backgroundSize","backgroundRepeat","gameWrapper","color","gameGif","position","top","url","dialogs","npc_01","message","npc_02","npc_03","npc_04","sword","answer","audio","watermelon","pineapple","orange","mango","cherries","banana","avocado","push","sign_01","book_01","arrQuestion","App","classes","messages","setMessages","characterName","setCharacterName","gameMenuItems","setGameMenuItems","gameMenuPosition","setGameMenuPosition","heroHealthStates","setHeroHealthStates","heroCoins","setHeroCoins","urlAudio","setUrlAudio","questionIndex","setQuestionIndex","mess","setMess","setMessage","id","setId","roomId","setRoomId","name","setName","socketRef","messagesEnd","query","window","location","search","substring","console","log","getQueryVariable","variable","vars","split","i","length","pair","current","connect","auth","on","data","upPoint","point","emit","dataGot","oldMsgs","scrollToBottom","disconnect","sendMessage","msg","content","scrollIntoView","behavior","renderMess","map","m","index","handleChange","e","target","value","onEnterPress","keyCode","shiftKey","handleMessageIsDone","customEvent","CustomEvent","detail","dispatchEvent","handleMenuItemSelected","selectedItem","game","Game","type","AUTO","title","parent","orientation","Scale","LANDSCAPE","localStorageName","autoRound","pixelArt","scale","autoCenter","CENTER_BOTH","mode","ENVELOP","scene","physics","default","plugins","key","plugin","mapping","phaserGame","question","localStorage","setItem","dialogBoxEventListener","addEventListener","gameMenuEventListener","menuItems","menuPosition","heroHealthEventListener","healthStates","heroCoinEventListener","removeEventListener","getItem","right","cursor"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useMemo, useState, useRef } from \"react\";\nimport socketIOClient from \"socket.io-client\";\n\nimport Phaser from \"phaser\";\nimport GridEngine from \"grid-engine\";\nimport BootScene from \"./game/scenes/BootScene\";\nimport MainMenuScene from \"./game/scenes/MainMenuScene\";\nimport GameOverScene from \"./game/scenes/GameOverScene\";\nimport GameScene from \"./game/scenes/GameScene\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\nimport { Backdrop, Fade, Modal, Typography } from \"@material-ui/core\";\nimport dialogBorderBox from \"./game/assets/images/dialog_borderbox.png\";\nimport GameMenu from \"./game/GameMenu\";\nimport DialogBox from \"./game/DialogBox\";\nimport HeroCoin from \"./game/HeroCoin\";\nimport HeroHealth from \"./game/HeroHealth\";\nimport \"./App.css\";\nimport { calculateGameSize } from \"./game/utils\";\nimport ReactAudioPlayer from \"react-audio-player\";\nimport apple from \"./game/assets/audio/apple.mp3\";\nimport volume from \"./game/assets/images/volume.png\";\nimport trophy from \"./game/assets/images/trophy.png\";\n\nconst { width, height, multiplier } = calculateGameSize();\nconst host = \"http://localhost:3000\";\n\nconst useStyles = makeStyles((theme) => ({\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    overflow: \"auto\",\n  },\n  postContainer: {\n    maxWidth: \"90%\",\n    maxHeight: \"90%\",\n  },\n  gameContentWrapper: {\n    width: `${width * multiplier}px`,\n    height: `${height * multiplier}px`,\n    margin: \"auto\",\n    padding: 0,\n    overflow: \"hidden\",\n    \"& canvas\": {\n      imageRendering: \"pixelated\",\n      \"-ms-interpolation-mode\": \"nearest-neighbor\",\n      boxShadow: \"0px 0px 0px 3px rgba(0,0,0,0.75)\",\n    },\n  },\n  pageWrapper: {\n    background: theme.palette.background.paper,\n    padding: 0,\n    margin: 0,\n  },\n  loadingText: {\n    fontFamily: '\"Press Start 2P\"',\n    marginTop: \"30px\",\n    marginLeft: \"30px\",\n  },\n  preLoadDialogImage: {\n    backgroundImage: `url(\"${dialogBorderBox}\")`,\n    backgroundSize: \"1px\",\n    backgroundRepeat: \"no-repeat\",\n  },\n  gameWrapper: {\n    color: \"#FFFFFF\",\n  },\n  gameGif: {\n    width: \"100%\",\n    position: \"absolute\",\n    imageRendering: \"pixelated\",\n    top: 0,\n  },\n}));\n\nconst url = \"https://vysqy4zclvobj.vcdn.cloud/E_Learning/page/\";\n\nconst dialogs = {\n  npc_01: [\n    {\n      message: \"Hello\",\n    },\n  ],\n  npc_02: [\n    {\n      message: \"Hello there\",\n    },\n  ],\n  npc_03: [\n    {\n      message: \"Hi\",\n    },\n  ],\n  npc_04: [\n    {\n      message: \"Hey\",\n    },\n  ],\n  sword: [\n    {\n      message:\n        \"Newton phát hiện ra định luật hấp dẫn sau khi bị quả gì rơi vào đầu?\",\n      answer: \"apple\",\n      audio: apple,\n    },\n  ],\n  apple: [\n    {\n      message: \"Quả gì khi chín đỏ tươi. Ăn vào ngọt mát, da thời đẹp hơn?\",\n      answer: \"apple\",\n      audio: \"apple.mp3\",\n    },\n  ],\n  watermelon: [\n    {\n      message: \"Quả gì nổi tiếng trong sự tích Mai An Tiêm?\",\n      answer: \"watermelon\",\n      audio: \"water_melon.mp3\",\n    },\n  ],\n  pineapple: [\n    {\n      message: \"Quả gì có nhiều mắt nhất?\",\n      answer: \"pineapple\",\n      audio: \"pineapple.mp3\",\n    },\n  ],\n  orange: [\n    {\n      message: \"Quả gì bổ sung nhiều vitamin C cho cơ thể?\",\n      answer: \"orange\",\n      audio: \"orange.mp3\",\n    },\n  ],\n  mango: [\n    {\n      message:\n        \"Lủng liễng trĩu trịt cành cao. Nghe tên cứ ngỡ ngã nhào đất đen?\",\n      answer: \"mango\",\n      audio: \"mango.mp3\",\n    },\n  ],\n  cherries: [\n    {\n      message: \"Quả gì màu đỏ ăn rất ngon?\",\n      answer: \"cherry\",\n      audio: \"cherry.mp3\",\n    },\n  ],\n  banana: [\n    {\n      message: \"Vỏ quả này dẫm phải rất dễ ngã đó nha\",\n      answer: \"banana\",\n      audio: \"banana.mp3\",\n    },\n  ],\n  avocado: [\n    {\n      message:\n        \"Da thì đen mượt, Ruột trắng hơn ngà, Mùi vị đậm đà, Đắt ơi là đắt - Là quả gì?\",\n      answer: \"avocado\",\n      audio: \"avocado.mp3\",\n    },\n  ],\n  push: [\n    {\n      message: \"You can push boxes now\",\n    },\n  ],\n  sign_01: [\n    {\n      message: \"You can read this!\",\n    },\n  ],\n  book_01: [\n    {\n      message: \"Welcome to the game!\",\n    },\n  ],\n};\n\nconst arrQuestion = [\n  \"apple\",\n  \"watermelon\",\n  \"orange\",\n  \"pineapple\",\n  \"cherries\",\n  \"mango\",\n  \"banana\",\n  \"avocado\",\n];\n\nfunction App() {\n  const classes = useStyles();\n  const [messages, setMessages] = useState([]);\n  const [characterName, setCharacterName] = useState(\"\");\n  const [gameMenuItems, setGameMenuItems] = useState([\"hihi\"]);\n  const [gameMenuPosition, setGameMenuPosition] = useState(\"center\");\n  const [heroHealthStates, setHeroHealthStates] = useState([\n    \"full\",\n    \"full\",\n    \"full\",\n  ]);\n  const [heroCoins, setHeroCoins] = useState(0);\n  const [urlAudio, setUrlAudio] = useState(\"\");\n  const [questionIndex, setQuestionIndex] = useState(0);\n\n  const [mess, setMess] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [id, setId] = useState();\n  const [roomId, setRoomId] = useState();\n  const [name, setName] = useState();\n\n  const socketRef = useRef();\n  const messagesEnd = useRef();\n\n  var query = window.location.search.substring(1);\n  console.log(query);\n\n  function getQueryVariable(variable) {\n    var query = window.location.search.substring(1);\n    console.log(query); //\"app=article&act=news_content&aid=160990\"\n    var vars = query.split(\"&\");\n    console.log(vars); //[ 'app=article', 'act=news_content', 'aid=160990' ]\n    for (var i = 0; i < vars.length; i++) {\n      var pair = vars[i].split(\"=\");\n      console.log(pair); //[ 'app', 'article' ][ 'act', 'news_content' ][ 'aid', '160990' ]\n      if (pair[0] == variable) {\n        return pair[1];\n      }\n    }\n    return false;\n  }\n  useEffect(() => {\n    console.log(roomId);\n    console.log(name);\n  }, [roomId, name]);\n\n  useEffect(() => {\n    const roomId = getQueryVariable(\"roomid\");\n    const name = getQueryVariable(\"name\");\n    setRoomId(roomId);\n    setName(name);\n\n    socketRef.current = socketIOClient.connect(host, {\n      auth: {\n        name: name,\n      },\n    });\n\n    socketRef.current.on(\"getId\", (data) => {\n      setId(data);\n    });\n\n    socketRef.current.on(\"setUser\", (data) => {\n      console.log(data);\n    });\n    socketRef.current.on(\"changedRank\", (data) => {\n      console.log(data);\n    });\n\n    socketRef.current.on(\"listUser\", (data) => {\n      console.log(data);\n    });\n    const upPoint = () => {\n      const point = {\n        id: id,\n        point: 10,\n        roomId: `room${roomId}`,\n      };\n      socketRef.current.emit(\"changedRank\", );\n    };\n\n    socketRef.current.emit(\"create\", `room${roomId}`);\n\n    socketRef.current.on(\"sendDataServer\", (dataGot) => {\n      setMess((oldMsgs) => [...oldMsgs, dataGot.data]);\n      scrollToBottom();\n    });\n\n    return () => {\n      socketRef.current.disconnect((id) => {\n        console.log(\"disconnect\");\n      });\n    };\n  }, []);\n\n  const sendMessage = () => {\n    if (message !== null) {\n      const msg = {\n        content: message,\n        id: id,\n        roomId: `room${roomId}`,\n      };\n      socketRef.current.emit(\"sendDataClient\", msg);\n      setMessage(\"\");\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEnd.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  const renderMess = mess.map((m, index) => (\n    <div\n      key={index}\n      className={`${m.id === id ? \"your-message\" : \"other-people\"} chat-item`}\n    >\n      {m.content}\n    </div>\n  ));\n\n  const handleChange = (e) => {\n    setMessage(e.target.value);\n  };\n\n  const onEnterPress = (e) => {\n    if (e.keyCode == 13 && e.shiftKey == false) {\n      sendMessage();\n    }\n  };\n\n  const handleMessageIsDone = useCallback(() => {\n    const customEvent = new CustomEvent(`${characterName}-dialog-finished`, {\n      detail: {},\n    });\n    window.dispatchEvent(customEvent);\n\n    setMessages([]);\n    setCharacterName(\"\");\n  }, [characterName]);\n\n  const handleMenuItemSelected = useCallback((selectedItem) => {\n    setGameMenuItems([]);\n\n    const customEvent = new CustomEvent(\"menu-item-selected\", {\n      detail: {\n        selectedItem,\n      },\n    });\n    window.dispatchEvent(customEvent);\n  }, []);\n\n  useEffect(() => {\n    const game = new Phaser.Game({\n      type: Phaser.AUTO,\n      title: \"some-game-title\",\n      parent: \"game-content\",\n      orientation: Phaser.Scale.LANDSCAPE,\n      localStorageName: \"some-game-title\",\n      width,\n      height,\n      autoRound: true,\n      pixelArt: true,\n      scale: {\n        autoCenter: Phaser.Scale.CENTER_BOTH,\n        mode: Phaser.Scale.ENVELOP,\n      },\n      scene: [BootScene, MainMenuScene, GameScene, GameOverScene],\n      physics: {\n        default: \"arcade\",\n      },\n      plugins: {\n        scene: [\n          {\n            key: \"gridEngine\",\n            plugin: GridEngine,\n            mapping: \"gridEngine\",\n          },\n        ],\n      },\n      backgroundColor: \"#000000\",\n    });\n\n    window.phaserGame = game;\n  }, []);\n\n  useEffect(() => {\n    if (gameMenuItems.length == 0) {\n      console.log(\"start\");\n      const question = arrQuestion[questionIndex];\n      localStorage.setItem(\"question\", question);\n      setUrlAudio(`${url}${dialogs[question][0].audio}`);\n    }\n  }, [questionIndex, gameMenuItems]);\n\n  useEffect(() => {\n    const dialogBoxEventListener = ({ detail }) => {\n      // TODO fallback\n      detail.characterName === arrQuestion[questionIndex] &&\n        setUrlAudio(`${url}${dialogs[detail.characterName][0].audio}`);\n      setCharacterName(detail.characterName);\n      setMessages(dialogs[detail.characterName]);\n    };\n    window.addEventListener(\"new-dialog\", dialogBoxEventListener);\n\n    const gameMenuEventListener = ({ detail }) => {\n      setGameMenuItems(detail.menuItems);\n      setGameMenuPosition(detail.menuPosition);\n    };\n    window.addEventListener(\"menu-items\", gameMenuEventListener);\n\n    const heroHealthEventListener = ({ detail }) => {\n      // console.log(detail);\n      setHeroHealthStates(detail.healthStates);\n    };\n    window.addEventListener(\"hero-health\", heroHealthEventListener);\n\n    const heroCoinEventListener = ({ detail }) => {\n      // setHeroCoins(detail.heroCoins);\n    };\n    window.addEventListener(\"hero-coin\", heroCoinEventListener);\n\n    return () => {\n      window.removeEventListener(\"new-dialog\", dialogBoxEventListener);\n      window.removeEventListener(\"menu-items\", gameMenuEventListener);\n      window.removeEventListener(\"hero-health\", heroHealthEventListener);\n      window.removeEventListener(\"hero-coin\", heroCoinEventListener);\n    };\n  }, [setCharacterName, setMessages]);\n  console.log(gameMenuItems);\n  return (\n    <div>\n      {gameMenuItems.length == 0 && (\n        <div class=\"leaderboard\">\n          <h1>\n            <img src={trophy} />\n            Leader Board\n          </h1>\n          <ol>\n            <li>Jerry Wood</li>\n            <li>Brandon Barnes</li>\n            <li>Raymond Knight</li>\n            <li>Trevor McCormick</li>\n            <li>Andrew Fox</li>\n          </ol>\n        </div>\n      )}\n      <ReactAudioPlayer\n        src={urlAudio}\n        autoPlay={true}\n        controls\n        style={{ display: \"none\" }}\n        onEnded={() => setUrlAudio(\"\")}\n      />\n      <div className={classes.gameWrapper}>\n        <div id=\"game-content\" className={classes.gameContentWrapper}>\n          {/* this is where the game canvas will be rendered */}\n        </div>\n        {gameMenuItems.length === 0 && (\n          <button\n            onClick={() =>\n              setUrlAudio(\n                `${url}${dialogs[localStorage.getItem(\"question\")][0].audio}`\n              )\n            }\n            style={{\n              position: \"fixed\",\n              right: \"500px\",\n              top: \"40px\",\n              backgroundColor: \"transparent\",\n              border: 0,\n              cursor: \"pointer\",\n            }}\n          >\n            <img src={volume} />\n          </button>\n        )}\n        {heroHealthStates.length > 0 && (\n          <HeroHealth\n            gameSize={{\n              width,\n              height,\n              multiplier,\n            }}\n            healthStates={heroHealthStates}\n          />\n        )}\n        {heroCoins !== null && (\n          <HeroCoin\n            gameSize={{\n              width,\n              height,\n              multiplier,\n            }}\n            heroCoins={heroCoins}\n          />\n        )}\n        {messages.length > 0 && (\n          <DialogBox\n            onDone={handleMessageIsDone}\n            characterName={characterName}\n            messages={messages}\n            gameSize={{\n              width,\n              height,\n              multiplier,\n            }}\n            setHeroCoins={setHeroCoins}\n            setHeroHealthStates={setHeroHealthStates}\n            question={arrQuestion[questionIndex]}\n            setQuestionIndex={setQuestionIndex}\n            heroHealthStates={heroHealthStates}\n          />\n        )}\n        {gameMenuItems.length > 0 && (\n          <GameMenu\n            items={gameMenuItems}\n            gameSize={{\n              width,\n              height,\n              multiplier,\n            }}\n            position={gameMenuPosition}\n            onSelected={handleMenuItemSelected}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}